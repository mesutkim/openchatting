<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 
"-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="chatMapper">
	<resultMap type="chat" id="chatResultSet">
		<result column="CHAT_NO" property="chatNo"/>
		<result column="USER_ID" property="userId"/>
		<result column="TITLE" property="title"/>
		<result column="CONTENT" property="content"/>
	</resultMap>
	
	<!-- 채팅 만들기 -->
	<insert id="insertChat" parameterType="chat">
		INSERT
		  INTO
		  		CHAT
		  		(
		  		CHAT_NO
		  		,USER_ID
		  		,TITLE
		  		,CONTENT
		  		)
		VALUES
				(
				SEQ_CNO.NEXTVAL
				,#{userId}
				,#{title}
				,#{content}
				)
	</insert>
	
	<!-- 게시글 총 갯수 조회 -->
	<select id="selectListCount" resultType="_int">
		SELECT
				COUNT(*)
		  FROM
		  		CHAT
		 WHERE
		 		STATUS = 'N'
	</select>
	
	<!-- 전체 게시글 조회 -->
  	<select id="selectChatList" resultMap="chatResultSet">
  		SELECT
  		  		CHAT_NO
  		  		,USER_ID
  		  		,TITLE
  		  		,CONTENT
  		  FROM
  		  		CHAT
  		 WHERE
  		 		STATUS = 'N'
  		 ORDER
  		    BY
  		    	CHAT_NO DESC
  	</select>
</mapper>
